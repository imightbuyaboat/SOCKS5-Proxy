# SOCKS5-Proxy

В данном репозитории представлена реализация безопасного **SOCKS5-прокси** с поддержкой **TCP** и **UDP**, написанная на языке **Go**.

## Структура проекта

- **Клиент** - локальный SOCKS5-прокси, через который приложения могут передавать TCP/UDP трафик;
- **Сервер** - удаленный relay-сервер, который принимает шифрованный трафик и передает его целевому хосту.

Поддерживается:

- Протокол TCP через SOCKS5 (`CONNECT`)
- Протокол UDP через SOCKS5 (`UDP_ASSOCIATE`)
- Сквозное шифрование между клиентом и сервером с использованием алгоритма `ChaCha20-Poly1305`
- Обмен ключами между клиентом и сервером и вычисление общего секрета для каждого соединения с использованием алгоритма `x25519`
- Handshake без аутентификации (`method: 0x00`)
- Адресация с использованием IPv4 и доменных имен
- Логирование с использованием `go.uber.org/zap`

## Конфигурация

Файл `config.json` в корне проекта содержит конфигурацию клиента и сервера:

```json
{
    "listen_address": "0.0.0.0:1080",
    "remote_tcp_address": "0.0.0.0:1081",
    "remote_udp_address": "0.0.0.0:1082"
}
```

### Клиент

В `listen_address` указывается адрес локального хоста, на котором запускается прокси-клиент (для запуска через Docker необходимо оставить `0.0.0.0` и по желанию изменить только порт).

В `remote_tcp_address` и `remote_udp_address` указывается IPv4 адрес удаленного хоста, на котором запущен прокси-сервер.

### Сервер

Поле `listen_address` не используется.

В `remote_tcp_address` и `remote_udp_address` указывается IPv4 адрес удаленного хоста, на котором запущен прокси-сервер (для запуска через Docker необходимо оставить `0.0.0.0` в обоих полях и по желанию изменить только порты).

## Установка и запуск

```bash
git clone https://github.com/imightbuyaboat/SOCKS5-Proxy
cd SOCKS5-Proxy
```

Клиент и сервер собираются и запускаются из корня проекта с использованием соответствующих Dockerfile.

### Клиент

```bash
docker build -f client/Dockerfile -t socks5-client .
docker run --rm -d --network host --name socks5-client-container socks5-client
```

### Сервер

```bash
docker build -f server/Dockerfile -t socks5-server .
docker run --rm -d --network host --name socks5-server-container socks5-server
```

## Тестирование

### TCP

На локальном хосте, на котором запущен прокси-клиент, необходимо выполнить:

```bash
curl --socks5 127.0.0.1:1080 https://example.com
```

где `1080` - порт, который прослушивает прокси-клиент.

### UDP

Для тестирования протокола UDP в корне проекта необходимо выполнить:

```cmd
go test -v socks5_tests/socks5_udp_test.go
```
